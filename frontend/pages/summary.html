<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="{{ url_for('static', filename='globalsSummary.css') }}" />
    <link rel="stylesheet" href="{{ url_for('static', filename='styleSummary.css') }}" />
  </head>
  <body>
    <div class="SUMMARY">
      <div class="overlap-wrapper">
        <div class="overlap">
          <div class="ellipse"></div>
          <div class="div"></div>
          <div class="ellipse-2"></div>
          <div class="ellipse-3"></div>
          <div class="rectangle"></div>
          <div class="rectangle-2"></div>
          <div class="lectures-rectangle">
            <select class="lectures-dropdown" id="lecturesDropdown" onchange="updateSelectedLecture()">
              <option value="" disabled selected>Select your option</option>
              <option value="Calloc vs malloc">Calloc vs malloc</option>
              <option value="Decimal to Binary Conversion">Decimal to Binary Conversion</option>
              <option value="Pointers in C Basic">Pointers in C Basic</option>
              <!-- Add more options as needed -->
            </select>
            <div class="text-wrapper-2">
              <span id="lecturesLabel">Choose a Lecture...</span>
              <span id="selectedLecture" style="display: none;"></span> <!-- Initially hidden -->
            </div>
            <img class="polygon" src="{{ url_for('static', filename='img/polygon-1.svg') }}" />
          </div>
          <div class="rectangle-3">
            <span id="rectangle-3-content"></span> <!-- This element will display the output -->
          </div>
          <!-- Chatbot Button -->
          <a href="{{ url_for('chat') }}" class="button-link">
            <img class="img" src="{{ url_for('static', filename='img/rectangle-10.svg') }}" />
            <div class="text-wrapper-3">CHATBOT</div>
          </a>
          <!-- Summary Button -->
          <a href="{{ url_for('summary') }}" class="button-link">
            <div class="rectangle-4"></div>
            <div class="text-wrapper-4">SUMMARY</div>
          </a>
          <!-- Quiz Button -->
          <a href="{{ url_for('quiz') }}" class="button-link">
            <div class="rectangle-5"></div>
            <div class="text-wrapper-5">QUIZ</div>
          </a>
          <img class="group" src="{{ url_for('static', filename='img/group.png') }}" />
          <div class="overlap-group-wrapper">
            <div class="overlap-group"><div class="ellipse-4"></div></div>
          </div>
        </div>
      </div>
    </div>
    <script>
      function updateSelectedLecture() {
        var dropdown = document.getElementById("lecturesDropdown");
        var selectedOption = dropdown.value;
        document.getElementById("selectedLecture").innerText = selectedOption;
        var selectedText = dropdown.options[dropdown.selectedIndex].text;
        var label = document.getElementById("lecturesLabel");
        var selectedLectureSpan = document.getElementById("selectedLecture");
        // If the selected option is not the placeholder
        if(dropdown.selectedIndex > 0) {
          label.style.display = "none"; // Hide the "LECTURES" text
          selectedLectureSpan.textContent = selectedText; // Set the selected text
          selectedLectureSpan.style.display = "block"; // Show the selected text
        } else {
          label.style.display = "block"; // Show the "LECTURES" text
          selectedLectureSpan.style.display = "none"; // Hide the selected text
        }
        fetch('/lecture_summary', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify({ lecture: selectedOption })
      })
      .then(response => response.text())
      .then(data => {
        console.log('Success:', data);
        document.getElementById('rectangle-3-content').innerText = data; // Update the rectangle-3 content
      })
      .catch((error) => {
        console.error('Error:', error);
      });
      }
  </script>
  </body>
</html>

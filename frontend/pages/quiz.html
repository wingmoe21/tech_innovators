<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="{{ url_for('static', filename='globals2.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='style2.css') }}">
  </head>
  <body>
    <div class="quiz">
      <div class="div">
        <div class="overlap">
          <div class="text-wrapper">Welcome</div>
          <img class="group" src="{{ url_for('static', filename='img1/group.png') }}" />
          <a href="{{ url_for('home') }}" class="button-link">
          <img class="vector" src="{{ url_for('static', filename='img1/vector-4.svg') }}" /></a>
          <div class="list-menu">
            <a href="{{ url_for('summary') }}" class="button-link">
                <div class="overlap-group"><div class="text-wrapper-2">Summary</div></div>
            </a>
          <a href="{{ url_for('quiz') }}" class="button-link">
            <div class="div-wrapper"><div class="text-wrapper-3">Quiz</div></div>
          </a>
          <a href="{{ url_for('chat') }}" class="button-link">
            <div class="overlap-2"><div class="text-wrapper-4">Chatbot</div></div>
          </a>
          </div>
          <a href="{{ url_for('home') }}" class="button-link">
          <div class="text-wrapper-5">Exit</div>
          </a>
        </div>
        <div class="overlap-3">
          <div class="overlap-4">
            <div class="frame">
              <select class="lectures-dropdown" id="lecturesDropdown" onchange="updateSelectedLecture()">
                <option value="" disabled selected>Select your option</option>
                <!-- <option value="Decimal to Binary Conversion _ GeeksforGeeks">Decimal to Binary Conversion</option> -->
                <!-- <option value="Binary to Decimal Conversion _ GeeksforGeeks">Binary to Decimal Conversion</option> -->
                <option value="Decimal to Octal Conversion _ GeeksforGeeks">Decimal to Octal Conversion</option>
                <option value="Octal to Decimal Conversion _ GeeksforGeeks">Octal to Decimal Conversion</option>
                <option value="Decimal to Hexadecimal Conversion _ GeeksforGeeks">Decimal to Hexadecimal Conversion</option>
                <!-- <option value="Hexadecimal to Decimal Conversion _ GeeksforGeeks">Hexadecimal to Decimal Conversion</option> -->
                <option value="Pointers in C Basic _ GeeksforGeeks">Pointers in C Basic</option>
                <option value="Double Pointer (Pointer to Pointer) in C _ GeeksforGeeks">Double Pointer (Pointer to Pointer) in C</option>
                <!-- <option value="Dereference, Reference _ GeeksforGeeks">Dereference, Reference</option> -->
                <!-- <option value="Why C treats array parameters as pointers">Why C treats array parameters as pointers</option> -->
                <!-- <option value="Dangling, Void , Null and Wild Pointers _ GeeksforGeeks">Dangling, Void , Null and Wild Pointers</option> -->
                <option value="How to declare a pointer to a function">How to declare a pointer to a function</option>
                <!-- <option value="An Uncommon representation of array elements">An Uncommon representation of array elements</option> -->
                <!-- <option value="Functions that are executed before and after main() in C _ GeeksforGeeks">Functions that are executed before and after main() in C</option> -->
                <option value="Functions in C _ C   _ GeeksforGeeks">Functions in C </option>
                <!-- <option value="restrict keyword in C (C Programming) _ GeeksforGeeks">restrict keyword in C (C Programming)</option> -->
                <option value="Void Pointer in C _ GeeksforGeeks">Void Pointer in C</option>
                <option value="How does free() know the size of memory to be deallocated">How does free() know the size of memory to be deallocated</option>
                <!-- <option value="Understanding “register” keyword in C _ GeeksforGeeks">Understanding “register” keyword in C</option> -->
                <!-- <option value="What is evaluation order of function parameters in C">What is evaluation order of function parameters in C</option> -->
                <!-- <option value="Use of realloc _ GeeksforGeeks">Use of realloc</option> -->
                <!-- <option value="Structure Member Alighnment and Padding (Part 3) _ GeeksforGeeks">Structure Member Alighnment and Padding (Part 2)</option> -->
                <option value="Structure Member Alighnment and Padding (Part 1) _ GeeksforGeeks">Structure Member Alighnment and Padding (Part 1)</option>
                <option value="Structures in C _ GeeksforGeeks">Structures in C</option>
                <option value="Calloc vs malloc _ GeeksforGeeks">Calloc vs malloc</option>
                <option value="Pointer vs Array (C Programming) _ GeeksforGeeks">Pointer vs Array (C Programming)</option>
                <option value="How to deallocate memory without using free() in C">How to deallocate memory without using free() in C</option>
                <!-- <option value="Minimum Cost Path Problem _ GeeksforGeeks">Minimum Cost Path Problem</option>
                <option value="Variables (Core Java) _ GeeksforGeeks">Variables (Core Java)</option> -->
            </select>
            <div class="text-wrapper-12">
                <span id="lecturesLabel">Choose a Lecture...</span>
                <span id="selectedLecture" style="display: none;"></span> <!-- Initially hidden -->
            </div>
    <img class="img" src="{{ url_for('static', filename='img1/vector-5.svg') }}" />
      </div>
            <img class="image" src="{{ url_for('static', filename='img1/image-5.png') }}" />
          </div>
          <div class="text-wrapper-7">Quiz</div>
        </div>
        <div class="rectangle"></div>
        <div class="overlap-5">
          <div class="loader1" style="display: none;"></div> <!-- Loader initially hidden -->
          <div class="overlap-wrapper">
            <div class="overlap-6"><div id="text-wrapper-8" class="text-wrapper-8">Please Choose a Lecture</div></div>
          </div>
          <p class="question-title" id="questionTitle"></p>
          <div class="options-container">
          <div class="option">
            <input type="radio" id="option1" name="quizOption" value="" class="radio">
            <label for="option1" id="labelOption1"></label>
          </div>
          
          <div class="option">
            <input type="radio" id="option2" name="quizOption" value="" class="radio">
            <label for="option2" id="labelOption2"></label>
          </div>
          
          <div class="option">
            <input type="radio" id="option3" name="quizOption" value="" class="radio">
            <label for="option3" id="labelOption3"></label>
          </div>
          
          <div id="resultMessage1"></div>
          </div>
          <input disabled type="submit" value="Submit" class="submit-button" id="submitBtn1">
            </div>
        <div class="overlap-7">
          <div class="loader2" style="display: none;"></div> <!-- Loader initially hidden -->
          <div class="overlap-wrapper">
            <div class="overlap-6"><div id="text-wrapper-10" class="text-wrapper-10">Please Choose a Lecture</div></div>
          </div>
          <p class="question-title" id="questionTitle1"></p>
          <div class="options-container">
          <div class="option">
            <input type="radio" id="option4" name="quizOption" value="" class="radio">
            <label for="option4" id="labelOption4"></label>
          </div>
          
          <div class="option">
            <input type="radio" id="option5" name="quizOption" value="" class="radio">
            <label for="option5" id="labelOption5"></label>
          </div>
          
          <div class="option">
            <input type="radio" id="option6" name="quizOption" value="" class="radio">
            <label for="option6" id="labelOption6"></label>
          </div>
          
          <div id="resultMessage2"></div>
          </div>
          <input disabled type="submit" value="Submit" class="submit-button" id="submitBtn2">
            </div>
        <div class="overlap-8">
          <div class="loader3" style="display: none;"></div> <!-- Loader initially hidden -->
          <div class="overlap-wrapper">
            <div class="overlap-6"><div id="text-wrapper-14" class="text-wrapper-14">Please Choose a Lecture</div></div>
          </div>
          <p class="question-title" id="questionTitle2"></p>
          <div class="options-container">
          <div class="option">
            <input type="radio" id="option7" name="quizOption" value="" class="radio">
            <label for="option7" id="labelOption7"></label>
          </div>
          
          <div class="option">
            <input type="radio" id="option8" name="quizOption" value="" class="radio">
            <label for="option8" id="labelOption8"></label>
          </div>
          
          <div class="option">
            <input type="radio" id="option9" name="quizOption" value="" class="radio">
            <label for="option9" id="labelOption9"></label>
          </div>
          
          <div id="resultMessage3"></div>
          </div>
          <input disabled type="submit" value="Submit" class="submit-button" id="submitBtn3">
        </div>
      </div>
    </div>
    <script>
      function updateSelectedLecture() {
      displayLoading(true); // Show loader
      var dropdown = document.getElementById("lecturesDropdown");
      var selectedOption = dropdown.value;
      document.getElementById("selectedLecture").innerText = selectedOption;
      var selectedText = dropdown.options[dropdown.selectedIndex].text;
      var label = document.getElementById("lecturesLabel");
      var selectedLectureSpan = document.getElementById("selectedLecture");
      // If the selected option is not the placeholder
      if(dropdown.selectedIndex > 0) {
        label.style.display = "none"; // Hide the "LECTURES" text
        selectedLectureSpan.textContent = selectedText; // Set the selected text
        selectedLectureSpan.style.display = "block"; // Show the selected text
        fetch('/lecture_quiz', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({ lecture: selectedOption })
        })
        .then(response => response.json())
        .then(data => {
          console.log('Success:', data);
          updateQuizSection(data)
          data1= data
          displayLoading(false); // Hide loader
        })
        .catch((error) => {
          displayLoading(false); // Hide loader
          console.error('Error:', error);
        });
      } else {
        label.style.display = "block"; // Show the "LECTURES" text
        selectedLectureSpan.style.display = "none"; // Hide the selected text
      }
    }
    function updateQuizSection(quizData) {
      document.getElementById('text-wrapper-8').innerText = 'Question 1'
      // Update question title
      document.getElementById('questionTitle').innerText = quizData['Question 1'];
      // Update options

      document.getElementById('option1').value = quizData['q1c1'];
      document.getElementById('labelOption1').innerText = quizData['q1c1'];
      
      document.getElementById('option2').value = quizData['q1c2'];
      document.getElementById('labelOption2').innerText = quizData['q1c2'];
      
      document.getElementById('option3').value = quizData['q1c3'];
      document.getElementById('option1').style.visibility = "visible";
      document.getElementById('option2').style.visibility = "visible";
      document.getElementById('option3').style.visibility = "visible";

      document.getElementById('labelOption3').innerText = quizData['q1c3'];

      document.getElementById('submitBtn1').style.cursor = "pointer";
      document.getElementById('submitBtn1').style.background = "#268971";
      document.getElementById('submitBtn1').disabled = false;

      document.getElementById('text-wrapper-10').innerText = 'Question 2'
      // Update question title
      document.getElementById('questionTitle1').innerText = quizData['Question 2'];
      // Update options

      document.getElementById('option4').value = quizData['q2c1'];
      document.getElementById('labelOption4').innerText = quizData['q2c1'];
      
      document.getElementById('option5').value = quizData['q2c2'];
      document.getElementById('labelOption5').innerText = quizData['q2c2'];
      
      document.getElementById('option6').value = quizData['q2c3'];
      document.getElementById('labelOption6').innerText = quizData['q2c3'];

      document.getElementById('option4').style.visibility = "visible";
      document.getElementById('option5').style.visibility = "visible";
      document.getElementById('option6').style.visibility = "visible";


      document.getElementById('submitBtn2').style.cursor = "pointer";
      document.getElementById('submitBtn2').style.background = "#268971";
      document.getElementById('submitBtn2').disabled = false;

      document.getElementById('text-wrapper-14').innerText = 'Question 3'
      // Update question title
      document.getElementById('questionTitle2').innerText = quizData['Question 3'];
      // Update options

      document.getElementById('option7').value = quizData['q3c1'];
      document.getElementById('labelOption7').innerText = quizData['q3c1'];
      
      document.getElementById('option8').value = quizData['q3c2'];
      document.getElementById('labelOption8').innerText = quizData['q3c2'];
      
      document.getElementById('option9').value = quizData['q3c3'];
      document.getElementById('labelOption9').innerText = quizData['q3c3'];

      document.getElementById('option7').style.visibility = "visible";
      document.getElementById('option8').style.visibility = "visible";
      document.getElementById('option9').style.visibility = "visible";


      document.getElementById('submitBtn3').style.cursor = "pointer";
      document.getElementById('submitBtn3').style.background = "#268971";
      document.getElementById('submitBtn3').disabled = false;

    }
    document.getElementById('submitBtn1').addEventListener('click', function(event) {
      event.preventDefault(); // Prevent the form from submitting normally
      document.getElementById('resultMessage1').innerText = data1['q1ans'];
    });
    document.getElementById('submitBtn2').addEventListener('click', function(event) {
      event.preventDefault(); // Prevent the form from submitting normally
      document.getElementById('resultMessage2').innerText = data1['q2ans'];
    });
    document.getElementById('submitBtn3').addEventListener('click', function(event) {
      event.preventDefault(); // Prevent the form from submitting normally
      document.getElementById('resultMessage3').innerText = data1['q3ans'];
    });
    function displayLoading(show) {
      console.log('Displaying loader:', show);
      var loader = document.querySelector('.loader1');
      var loader1 = document.querySelector('.loader2');
      var loader2 = document.querySelector('.loader3');

      if (loader) {
        loader.style.display = show ? 'block' : 'none';
        loader1.style.display = show ? 'block' : 'none';
        loader2.style.display = show ? 'block' : 'none';
      }
    }
  </script>
  </body>
</html>

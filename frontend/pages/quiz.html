<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="{{ url_for('static', filename='globalsQuiz.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='styleQuiz.css') }}">
  </head>
  <body>
    <div class="QUIZ">
      <div class="overlap-wrapper">
        <div class="overlap">
          <div class="ellipse"></div>
          <div class="div"></div>
          <div class="ellipse-2"></div>
          <div class="ellipse-3"></div>
          <div class="rectangle"></div>
          <div class="rectangle-2"></div>
          <div class="rectangle-3"></div>
          <div class="lectures-rectangle">
            <select class="lectures-dropdown" id="lecturesDropdown" onchange="updateSelectedLecture()">
              <option value="" disabled selected>Select your option</option>
              <option value="Calloc vs malloc">Calloc vs malloc</option>
              <option value="Decimal to Binary Conversion">Decimal to Binary Conversion</option>
              <option value="Pointers in C Basic">Pointers in C Basic</option>
              <!-- Add more options as needed -->
            </select>
            <div class="text-wrapper">
              <span id="lecturesLabel">Choose a Lecture...</span>
              <span id="selectedLecture" style="display: none;"></span> <!-- Initially hidden -->
            </div>
            <img class="polygon" src="{{ url_for('static', filename='img/polygon-1.svg') }}" />
          </div>
          <div class="rectangle-4"></div>
          <div class="rectangle-5"></div>
          <img class="img" src="{{ url_for('static', filename='img/rectangle-12.svg') }}" />
          <!-- Chatbot Button -->
          <a href="{{ url_for('chat') }}" class="button-link">
            <div class="rectangle-4"></div>
            <div class="text-wrapper-2">CHATBOT</div>
          </a>
          <!-- Summary Button -->
          <a href="{{ url_for('summary') }}" class="button-link">
            <div class="rectangle-5"></div>
            <div class="text-wrapper-3">SUMMARY</div>
          </a>
          <!-- Quiz Button -->
          <a href="{{ url_for('quiz') }}" class="button-link">
            <img class="img" src="{{ url_for('static', filename='img/rectangle-12.svg') }}" />
            <div class="text-wrapper-4">QUIZ</div>
          </a>
          <img class="group" src="{{ url_for('static', filename='img/group.png') }}" />
          <div class="overlap-group-wrapper">
            <div class="overlap-group"><div class="ellipse-4"></div></div>
          </div>
          <div class="QUIZ">
            <div class="message-rectangle">
              <form action="/submit-your-choice">
                <p class="question-title">Please select your favorite fruit:</p>
            
                <div class="option">
                  <input type="radio" id="apple" name="fruit" value="apple">
                  <label for="apple">Apple</label>
                </div>
            
                <div class="option">
                  <input type="radio" id="orange" name="fruit" value="orange">
                  <label for="orange">Orange</label>
                </div>
            
                <div class="option">
                  <input type="radio" id="banana" name="fruit" value="banana">
                  <label for="banana">Banana</label>
                </div>
            
                <div class="option">
                  <input type="radio" id="grape" name="fruit" value="grape">
                  <label for="grape">Grape</label>
                </div>
            
                <input type="submit" value="Submit" class="submit-button">
              </form>
            </div>
          </div>
          <div class="message-rectangle-2">
            <form action="/submit-your-choice">
              <p>Please select your favorite fruit:</p>
      
              <input type="radio" id="apple" name="fruit" value="apple">
              <label for="apple">Apple</label><br>
      
              <input type="radio" id="orange" name="fruit" value="orange">
              <label for="orange">Orange</label><br>
      
              <input type="radio" id="banana" name="fruit" value="banana">
              <label for="banana">Banana</label><br>
      
              <input type="radio" id="grape" name="fruit" value="grape">
              <label for="grape">Grape</label><br>
      
              <input type="submit" value="Submit">
          </form>
          </div>
          <div class="message-rectangle-3">
            <form action="/submit-your-choice">
              <p>Please select your favorite fruit:</p>
      
              <input type="radio" id="apple" name="fruit" value="apple">
              <label for="apple">Apple</label><br>
      
              <input type="radio" id="orange" name="fruit" value="orange">
              <label for="orange">Orange</label><br>
      
              <input type="radio" id="banana" name="fruit" value="banana">
              <label for="banana">Banana</label><br>
      
              <input type="radio" id="grape" name="fruit" value="grape">
              <label for="grape">Grape</label><br>
      
              <input type="submit" value="Submit">
          </form>
          </div>
        </div>
      </div>
    </div>
    <script>
            function updateSelectedLecture() {
        displayLoading(true); // Show loader
        var dropdown = document.getElementById("lecturesDropdown");
        var selectedOption = dropdown.value;
        document.getElementById("selectedLecture").innerText = selectedOption;
        var selectedText = dropdown.options[dropdown.selectedIndex].text;
        var label = document.getElementById("lecturesLabel");
        var selectedLectureSpan = document.getElementById("selectedLecture");
        // If the selected option is not the placeholder
        if(dropdown.selectedIndex > 0) {
          label.style.display = "none"; // Hide the "LECTURES" text
          selectedLectureSpan.textContent = selectedText; // Set the selected text
          selectedLectureSpan.style.display = "block"; // Show the selected text
          fetch('/lecture_quiz', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify({ lecture: selectedOption })
          })
          .then(response => response.text())
          .then(data => {
            console.log('Success:', data);
            updateQuizSection(data)
            displayLoading(false); // Hide loader
          })
          .catch((error) => {
            displayLoading(false); // Hide loader
            console.error('Error:', error);
          });
        } else {
          label.style.display = "block"; // Show the "LECTURES" text
          selectedLectureSpan.style.display = "none"; // Hide the selected text
        }
      }
      function updateQuizSection(quizData) {
        var quizContent = document.querySelector('.QUIZ .message-rectangle');
        if (quizContent) {
          // Clear existing content
          quizContent.innerHTML = '';
          
          // Loop through each question and create HTML elements
          for (var i = 1; i <= 3; i++) {  // Assuming there are 3 questions
            var question = quizData['Question ' + i];
            var qTitle = document.createElement('p');
            qTitle.className = 'question-title';
            qTitle.textContent = question;
            
            // Create a div for options
            var optionsDiv = document.createElement('div');
            optionsDiv.className = 'options';
            
            // Add options for the question
            for (var j = 1; j <= 3; j++) {
              var optionValue = quizData['q' + i + 'c' + j];
              var input = document.createElement('input');
              input.type = 'radio';
              input.id = 'q' + i + 'option' + j;
              input.name = 'question' + i;
              input.value = optionValue;
              
              var label = document.createElement('label');
              label.htmlFor = 'q' + i + 'option' + j;
              label.textContent = optionValue;
              
              var optionDiv = document.createElement('div');
              optionDiv.className = 'option';
              optionDiv.appendChild(input);
              optionDiv.appendChild(label);
              
              optionsDiv.appendChild(optionDiv);
            }
            // Append question title and options to quizContent
            quizContent.appendChild(qTitle);
            quizContent.appendChild(optionsDiv);
          }
          // Add a submit button
          var submitButton = document.createElement('input');
          submitButton.type = 'submit';
          submitButton.value = 'Submit';
          submitButton.className = 'submit-button';
          quizContent.appendChild(submitButton);
        }
      }
      function displayLoading(show) {
        console.log('Displaying loader:', show);
        var loader = document.querySelector('.loader');
        if (loader) {
          loader.style.display = show ? 'block' : 'none';
        }
      }
    </script>
  </body>
</html>

